function cov_yvc29mrct(){var path="C:\\capstoneRestAPis\\models\\User.js";var hash="fb734853fa8d707bc7e751d8e61cbe2516bdf971";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\capstoneRestAPis\\models\\User.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:18},end:{line:2,column:38}},"2":{start:{line:3,column:15},end:{line:3,column:32}},"3":{start:{line:4,column:12},end:{line:4,column:35}},"4":{start:{line:5,column:19},end:{line:29,column:2}},"5":{start:{line:31,column:0},end:{line:38,column:1}},"6":{start:{line:32,column:17},end:{line:32,column:21}},"7":{start:{line:33,column:18},end:{line:33,column:81}},"8":{start:{line:35,column:4},end:{line:35,column:47}},"9":{start:{line:36,column:4},end:{line:36,column:21}},"10":{start:{line:37,column:4},end:{line:37,column:16}},"11":{start:{line:39,column:0},end:{line:50,column:1}},"12":{start:{line:40,column:17},end:{line:40,column:44}},"13":{start:{line:42,column:5},end:{line:44,column:6}},"14":{start:{line:43,column:9},end:{line:43,column:26}},"15":{start:{line:45,column:21},end:{line:45,column:65}},"16":{start:{line:49,column:5},end:{line:49,column:16}},"17":{start:{line:53,column:0},end:{line:59,column:2}},"18":{start:{line:54,column:16},end:{line:54,column:20}},"19":{start:{line:55,column:3},end:{line:57,column:4}},"20":{start:{line:56,column:7},end:{line:56,column:58}},"21":{start:{line:58,column:3},end:{line:58,column:9}},"22":{start:{line:61,column:0},end:{line:61,column:57}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:31,column:39},end:{line:31,column:40}},loc:{start:{line:31,column:55},end:{line:38,column:1}},line:31},"1":{name:"(anonymous_1)",decl:{start:{line:39,column:39},end:{line:39,column:40}},loc:{start:{line:39,column:62},end:{line:50,column:1}},line:39},"2":{name:"(anonymous_2)",decl:{start:{line:53,column:23},end:{line:53,column:24}},loc:{start:{line:53,column:43},end:{line:59,column:1}},line:53}},branchMap:{"0":{loc:{start:{line:42,column:5},end:{line:44,column:6}},type:"if",locations:[{start:{line:42,column:5},end:{line:44,column:6}},{start:{line:42,column:5},end:{line:44,column:6}}],line:42},"1":{loc:{start:{line:55,column:3},end:{line:57,column:4}},type:"if",locations:[{start:{line:55,column:3},end:{line:57,column:4}},{start:{line:55,column:3},end:{line:57,column:4}}],line:55}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fb734853fa8d707bc7e751d8e61cbe2516bdf971"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_yvc29mrct=function(){return actualCoverage;};}return actualCoverage;}cov_yvc29mrct();const mongoose=(cov_yvc29mrct().s[0]++,require('mongoose'));const validator=(cov_yvc29mrct().s[1]++,require('validator'));const bcrypt=(cov_yvc29mrct().s[2]++,require('bcrypt'));const jwt=(cov_yvc29mrct().s[3]++,require('jsonwebtoken'));const userSchema=(cov_yvc29mrct().s[4]++,new mongoose.Schema({email:{type:String,unique:true,required:true,unique:true,lowercase:true// validate(value) {
// 	if (!validator.isEmail(value)) {
// 		throw new Error('Email is invalid')
// 	}
// }
},password:{type:String,required:true,minlength:6},tokens:[{token:{type:String,required:true}}]}));//generating auth token
cov_yvc29mrct().s[5]++;userSchema.methods.generateAuthToken=async function(){cov_yvc29mrct().f[0]++;const user=(cov_yvc29mrct().s[6]++,this);const token=(cov_yvc29mrct().s[7]++,jwt.sign({_id:user._id.toString()},'mynameisedgarilovecoding'));cov_yvc29mrct().s[8]++;user.tokens=user.tokens.concat({token});cov_yvc29mrct().s[9]++;await user.save();cov_yvc29mrct().s[10]++;return token;};cov_yvc29mrct().s[11]++;userSchema.statics.findByCredentials=async(email,password)=>{cov_yvc29mrct().f[1]++;const user=(cov_yvc29mrct().s[12]++,await User.findOne({email}));cov_yvc29mrct().s[13]++;if(!user){cov_yvc29mrct().b[0][0]++;cov_yvc29mrct().s[14]++;throw new Error();}else{cov_yvc29mrct().b[0][1]++;}const isMatch=(cov_yvc29mrct().s[15]++,await bcrypt.compare(password,user.password));//  if(!isMatch){
//      throw new Error({error:'wrong password'})
//  }
cov_yvc29mrct().s[16]++;return user;};//hash the plain text password
cov_yvc29mrct().s[17]++;userSchema.pre('save',async function(next){cov_yvc29mrct().f[2]++;const user=(cov_yvc29mrct().s[18]++,this);cov_yvc29mrct().s[19]++;if(user.isModified('password')){cov_yvc29mrct().b[1][0]++;cov_yvc29mrct().s[20]++;user.password=await bcrypt.hash(user.password,8);}else{cov_yvc29mrct().b[1][1]++;}cov_yvc29mrct().s[21]++;next();});cov_yvc29mrct().s[22]++;module.exports=User=mongoose.model('user',userSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXIuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwidmFsaWRhdG9yIiwiYmNyeXB0Iiwiand0IiwidXNlclNjaGVtYSIsIlNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsInVuaXF1ZSIsInJlcXVpcmVkIiwibG93ZXJjYXNlIiwicGFzc3dvcmQiLCJtaW5sZW5ndGgiLCJ0b2tlbnMiLCJ0b2tlbiIsIm1ldGhvZHMiLCJnZW5lcmF0ZUF1dGhUb2tlbiIsInVzZXIiLCJzaWduIiwiX2lkIiwidG9TdHJpbmciLCJjb25jYXQiLCJzYXZlIiwic3RhdGljcyIsImZpbmRCeUNyZWRlbnRpYWxzIiwiVXNlciIsImZpbmRPbmUiLCJFcnJvciIsImlzTWF0Y2giLCJjb21wYXJlIiwicHJlIiwibmV4dCIsImlzTW9kaWZpZWQiLCJoYXNoIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiNnhGQWVZO3lGQWZaLEtBQU1BLENBQUFBLFFBQVEseUJBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQUNBLEtBQU1DLENBQUFBLFNBQVMseUJBQUdELE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBZixDQUNBLEtBQU1FLENBQUFBLE1BQU0seUJBQUdGLE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDQUNBLEtBQU1HLENBQUFBLEdBQUcseUJBQUdILE9BQU8sQ0FBQyxjQUFELENBQVYsQ0FBVCxDQUNBLEtBQU1JLENBQUFBLFVBQVUseUJBQUcsR0FBSUwsQ0FBQUEsUUFBUSxDQUFDTSxNQUFiLENBQW9CLENBQ25DQyxLQUFLLENBQUMsQ0FDRkMsSUFBSSxDQUFDQyxNQURILENBRUZDLE1BQU0sQ0FBQyxJQUZMLENBR0ZDLFFBQVEsQ0FBQyxJQUhQLENBSVJELE1BQU0sQ0FBRSxJQUpBLENBS1JFLFNBQVMsQ0FBRSxJQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUSxDQUQ2QixDQWFuQ0MsUUFBUSxDQUFDLENBQ0xMLElBQUksQ0FBQ0MsTUFEQSxDQUVMRSxRQUFRLENBQUMsSUFGSixDQUdMRyxTQUFTLENBQUMsQ0FITCxDQWIwQixDQWtCbkNDLE1BQU0sQ0FBQyxDQUFDLENBQ0pDLEtBQUssQ0FBQyxDQUNGUixJQUFJLENBQUNDLE1BREgsQ0FFRkUsUUFBUSxDQUFDLElBRlAsQ0FERixDQUFELENBbEI0QixDQUFwQixDQUFILENBQWhCLENBeUJBO3VCQUNBTixVQUFVLENBQUNZLE9BQVgsQ0FBbUJDLGlCQUFuQixDQUF1QyxnQkFBZ0Isd0JBQ25ELEtBQU1DLENBQUFBLElBQUkseUJBQUcsSUFBSCxDQUFWLENBQ0EsS0FBTUgsQ0FBQUEsS0FBSyx5QkFBR1osR0FBRyxDQUFDZ0IsSUFBSixDQUFTLENBQUNDLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDRSxHQUFMLENBQVNDLFFBQVQsRUFBTCxDQUFULENBQW9DLDBCQUFwQyxDQUFILENBQVgsQ0FGbUQsdUJBSW5ESCxJQUFJLENBQUNKLE1BQUwsQ0FBY0ksSUFBSSxDQUFDSixNQUFMLENBQVlRLE1BQVosQ0FBbUIsQ0FBRVAsS0FBRixDQUFuQixDQUFkLENBSm1ELHVCQUtuRCxLQUFNRyxDQUFBQSxJQUFJLENBQUNLLElBQUwsRUFBTixDQUxtRCx3QkFNbkQsTUFBT1IsQ0FBQUEsS0FBUCxDQUNILENBUEQsQyx3QkFRQVgsVUFBVSxDQUFDb0IsT0FBWCxDQUFtQkMsaUJBQW5CLENBQXVDLE1BQU1uQixLQUFOLENBQVlNLFFBQVosR0FBdUIsd0JBQzFELEtBQU1NLENBQUFBLElBQUksMEJBQUcsS0FBTVEsQ0FBQUEsSUFBSSxDQUFDQyxPQUFMLENBQWEsQ0FBQ3JCLEtBQUQsQ0FBYixDQUFULENBQVYsQ0FEMEQsd0JBR3pELEdBQUcsQ0FBQ1ksSUFBSixDQUFTLG1EQUNMLEtBQU0sSUFBSVUsQ0FBQUEsS0FBSixFQUFOLENBQ0gsQ0FGRCxnQ0FHQSxLQUFNQyxDQUFBQSxPQUFPLDBCQUFHLEtBQU0zQixDQUFBQSxNQUFNLENBQUM0QixPQUFQLENBQWVsQixRQUFmLENBQXdCTSxJQUFJLENBQUNOLFFBQTdCLENBQVQsQ0FBYixDQUNEO0FBQ0E7QUFDQTtBQVQwRCx3QkFVekQsTUFBT00sQ0FBQUEsSUFBUCxDQUNKLENBWEQsQ0FhQTt3QkFDQWQsVUFBVSxDQUFDMkIsR0FBWCxDQUFlLE1BQWYsQ0FBdUIsZUFBZUMsSUFBZixDQUFvQix3QkFDeEMsS0FBTWQsQ0FBQUEsSUFBSSwwQkFBRyxJQUFILENBQVYsQ0FEd0Msd0JBRXhDLEdBQUdBLElBQUksQ0FBQ2UsVUFBTCxDQUFnQixVQUFoQixDQUFILENBQStCLG1EQUMzQmYsSUFBSSxDQUFDTixRQUFMLENBQWdCLEtBQU1WLENBQUFBLE1BQU0sQ0FBQ2dDLElBQVAsQ0FBWWhCLElBQUksQ0FBQ04sUUFBakIsQ0FBMkIsQ0FBM0IsQ0FBdEIsQ0FDSCxDQUZELGdDQUZ3Qyx3QkFLeENvQixJQUFJLEdBQ04sQ0FORCxFLHdCQVFBRyxNQUFNLENBQUNDLE9BQVAsQ0FBaUJWLElBQUksQ0FBRzNCLFFBQVEsQ0FBQ3NDLEtBQVQsQ0FBZSxNQUFmLENBQXNCakMsVUFBdEIsQ0FBeEIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJylcclxuY29uc3QgdmFsaWRhdG9yID0gcmVxdWlyZSgndmFsaWRhdG9yJylcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0JylcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJylcclxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgZW1haWw6e1xyXG4gICAgICAgIHR5cGU6U3RyaW5nLFxyXG4gICAgICAgIHVuaXF1ZTp0cnVlLFxyXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXHJcblx0XHR1bmlxdWU6IHRydWUsXHJcblx0XHRsb3dlcmNhc2U6IHRydWUsXHJcblx0XHQvLyB2YWxpZGF0ZSh2YWx1ZSkge1xyXG5cdFx0Ly8gXHRpZiAoIXZhbGlkYXRvci5pc0VtYWlsKHZhbHVlKSkge1xyXG5cdFx0Ly8gXHRcdHRocm93IG5ldyBFcnJvcignRW1haWwgaXMgaW52YWxpZCcpXHJcblx0XHQvLyBcdH1cclxuXHRcdC8vIH1cclxuICAgIH0sXHJcbiAgICBwYXNzd29yZDp7XHJcbiAgICAgICAgdHlwZTpTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcclxuICAgICAgICBtaW5sZW5ndGg6NlxyXG4gICAgfSxcclxuICAgIHRva2Vuczpbe1xyXG4gICAgICAgIHRva2VuOntcclxuICAgICAgICAgICAgdHlwZTpTdHJpbmcsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOnRydWVcclxuICAgICAgICB9XHJcbiAgICB9XVxyXG59KVxyXG4vL2dlbmVyYXRpbmcgYXV0aCB0b2tlblxyXG51c2VyU2NoZW1hLm1ldGhvZHMuZ2VuZXJhdGVBdXRoVG9rZW4gPSBhc3luYyBmdW5jdGlvbigpe1xyXG4gICAgY29uc3QgdXNlciA9IHRoaXNcclxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oe19pZDp1c2VyLl9pZC50b1N0cmluZygpfSwgJ215bmFtZWlzZWRnYXJpbG92ZWNvZGluZycpXHJcblxyXG4gICAgdXNlci50b2tlbnMgPSB1c2VyLnRva2Vucy5jb25jYXQoeyB0b2tlbiB9KVxyXG4gICAgYXdhaXQgdXNlci5zYXZlKClcclxuICAgIHJldHVybiB0b2tlblxyXG59XHJcbnVzZXJTY2hlbWEuc3RhdGljcy5maW5kQnlDcmVkZW50aWFscyA9IGFzeW5jKGVtYWlsLHBhc3N3b3JkKT0+e1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7ZW1haWx9KVxyXG4gICBcclxuICAgICBpZighdXNlcil7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigpXHJcbiAgICAgfVxyXG4gICAgIGNvbnN0IGlzTWF0Y2ggPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCx1c2VyLnBhc3N3b3JkKVxyXG4gICAgLy8gIGlmKCFpc01hdGNoKXtcclxuICAgIC8vICAgICAgdGhyb3cgbmV3IEVycm9yKHtlcnJvcjond3JvbmcgcGFzc3dvcmQnfSlcclxuICAgIC8vICB9XHJcbiAgICAgcmV0dXJuIHVzZXJcclxufVxyXG5cclxuLy9oYXNoIHRoZSBwbGFpbiB0ZXh0IHBhc3N3b3JkXHJcbnVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24obmV4dCl7XHJcbiAgIGNvbnN0IHVzZXIgPSB0aGlzXHJcbiAgIGlmKHVzZXIuaXNNb2RpZmllZCgncGFzc3dvcmQnKSl7XHJcbiAgICAgICB1c2VyLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godXNlci5wYXNzd29yZCwgOClcclxuICAgfVxyXG4gICBuZXh0KClcclxufSlcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXNlciA9IG1vbmdvb3NlLm1vZGVsKCd1c2VyJyx1c2VyU2NoZW1hKSJdfQ==