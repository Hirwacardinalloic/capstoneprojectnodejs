function cov_sktnvd27j(){var path="C:\\capstoneRestAPis\\controllers\\authController.js";var hash="b64ee1399b8bf21294fb50e6d7011a89a94eed70";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\capstoneRestAPis\\controllers\\authController.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:38}},"1":{start:{line:2,column:12},end:{line:2,column:35}},"2":{start:{line:4,column:19},end:{line:19,column:1}},"3":{start:{line:5,column:15},end:{line:5,column:83}},"4":{start:{line:8,column:4},end:{line:10,column:5}},"5":{start:{line:9,column:8},end:{line:9,column:53}},"6":{start:{line:11,column:4},end:{line:13,column:5}},"7":{start:{line:12,column:8},end:{line:12,column:54}},"8":{start:{line:17,column:4},end:{line:17,column:17}},"9":{start:{line:21,column:14},end:{line:21,column:24}},"10":{start:{line:22,column:20},end:{line:28,column:1}},"11":{start:{line:24,column:4},end:{line:26,column:7}},"12":{start:{line:30,column:0},end:{line:42,column:1}},"13":{start:{line:31,column:30},end:{line:31,column:38}},"14":{start:{line:32,column:4},end:{line:41,column:5}},"15":{start:{line:34,column:21},end:{line:34,column:53}},"16":{start:{line:35,column:22},end:{line:35,column:43}},"17":{start:{line:36,column:8},end:{line:36,column:42}},"18":{start:{line:39,column:22},end:{line:39,column:38}},"19":{start:{line:40,column:8},end:{line:40,column:45}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:24},end:{line:19,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:20},end:{line:22,column:21}},loc:{start:{line:22,column:26},end:{line:28,column:1}},line:22},"2":{name:"(anonymous_2)",decl:{start:{line:30,column:24},end:{line:30,column:25}},loc:{start:{line:30,column:42},end:{line:42,column:1}},line:30}},branchMap:{"0":{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:8,column:4},end:{line:10,column:5}}],line:8},"1":{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:11,column:4},end:{line:13,column:5}}],line:11}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b64ee1399b8bf21294fb50e6d7011a89a94eed70"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_sktnvd27j=function(){return actualCoverage;};}return actualCoverage;}cov_sktnvd27j();const User=(cov_sktnvd27j().s[0]++,require('../models/User'));const jwt=(cov_sktnvd27j().s[1]++,require('jsonwebtoken'));cov_sktnvd27j().s[2]++;const handleError=err=>{cov_sktnvd27j().f[0]++;let error=(cov_sktnvd27j().s[3]++,{email:'Provide an email address',password:'Provide a password'});//Login errors
cov_sktnvd27j().s[4]++;if(err.message==='Incorrect email'){cov_sktnvd27j().b[0][0]++;cov_sktnvd27j().s[5]++;error.email='That email is not registered';}else{cov_sktnvd27j().b[0][1]++;}cov_sktnvd27j().s[6]++;if(err.message==='Incorrect password'){cov_sktnvd27j().b[1][0]++;cov_sktnvd27j().s[7]++;error.password='That password is incorrect';}else{cov_sktnvd27j().b[1][1]++;}cov_sktnvd27j().s[8]++;return error;};const maxAge=(cov_sktnvd27j().s[9]++,1*24*60*60);cov_sktnvd27j().s[10]++;const createToken=id=>{cov_sktnvd27j().f[1]++;cov_sktnvd27j().s[11]++;//Here the payload to be signed is the user id
return jwt.sign({id},process.env.SECRET_KEY,{expiresIn:maxAge});};cov_sktnvd27j().s[12]++;module.exports.signIn=async(req,res)=>{cov_sktnvd27j().f[2]++;const{email,password}=(cov_sktnvd27j().s[13]++,req.body);cov_sktnvd27j().s[14]++;try{const user=(cov_sktnvd27j().s[15]++,await User.login(email,password));const token=(cov_sktnvd27j().s[16]++,createToken(user._id));cov_sktnvd27j().s[17]++;res.json({user:user._id,token});}catch(err){const error=(cov_sktnvd27j().s[18]++,handleError(err));cov_sktnvd27j().s[19]++;res.status(400).send({error:error});}};// module.exports.register = async (req, res)=>{
//     const {email, password} = req.body;
//     try{
//         const user = await User.create({ email, password });
//         res.status(201).json({ user: user._id });
//     }catch(err){
//         handleError(err);
//         res.send('user not created');
//     }
// }
// module.exports.logout = (req, res)=>{
//     res.header('Authorization', '');
//     res.json({});
// }
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIlVzZXIiLCJyZXF1aXJlIiwiand0IiwiaGFuZGxlRXJyb3IiLCJlcnIiLCJlcnJvciIsImVtYWlsIiwicGFzc3dvcmQiLCJtZXNzYWdlIiwibWF4QWdlIiwiY3JlYXRlVG9rZW4iLCJpZCIsInNpZ24iLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUX0tFWSIsImV4cGlyZXNJbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJzaWduSW4iLCJyZXEiLCJyZXMiLCJib2R5IiwidXNlciIsImxvZ2luIiwidG9rZW4iLCJfaWQiLCJqc29uIiwic3RhdHVzIiwic2VuZCJdLCJtYXBwaW5ncyI6InFuRkFlWTt5RkFmWixLQUFNQSxDQUFBQSxJQUFJLHlCQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUMsQ0FBQUEsR0FBRyx5QkFBR0QsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQUFULEMsdUJBRUEsS0FBTUUsQ0FBQUEsV0FBVyxDQUFFQyxHQUFHLEVBQUUsd0JBQ3BCLEdBQUlDLENBQUFBLEtBQUsseUJBQUUsQ0FBRUMsS0FBSyxDQUFFLDBCQUFULENBQXFDQyxRQUFRLENBQUUsb0JBQS9DLENBQUYsQ0FBVCxDQUVBO0FBSG9CLHVCQUlwQixHQUFHSCxHQUFHLENBQUNJLE9BQUosR0FBZ0IsaUJBQW5CLENBQXNDLGtEQUNsQ0gsS0FBSyxDQUFDQyxLQUFOLENBQWMsOEJBQWQsQ0FDSCxDQUZELGdDQUpvQix1QkFPcEIsR0FBR0YsR0FBRyxDQUFDSSxPQUFKLEdBQWdCLG9CQUFuQixDQUF5QyxrREFDckNILEtBQUssQ0FBQ0UsUUFBTixDQUFpQiw0QkFBakIsQ0FDSCxDQUZELGdDQVBvQix1QkFhcEIsTUFBT0YsQ0FBQUEsS0FBUCxDQUVILENBZkQsQ0FpQkEsS0FBTUksQ0FBQUEsTUFBTSx5QkFBRSxFQUFFLEVBQUYsQ0FBSyxFQUFMLENBQVEsRUFBVixDQUFaLEMsd0JBQ0EsS0FBTUMsQ0FBQUEsV0FBVyxDQUFJQyxFQUFELEVBQU0sZ0RBQ3RCO0FBQ0EsTUFBT1QsQ0FBQUEsR0FBRyxDQUFDVSxJQUFKLENBQVMsQ0FBRUQsRUFBRixDQUFULENBQWlCRSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBN0IsQ0FBeUMsQ0FDNUNDLFNBQVMsQ0FBRVAsTUFEaUMsQ0FBekMsQ0FBUCxDQUlILENBTkQsQyx3QkFRQVEsTUFBTSxDQUFDQyxPQUFQLENBQWVDLE1BQWYsQ0FBd0IsTUFBT0MsR0FBUCxDQUFZQyxHQUFaLEdBQWtCLHdCQUN0QyxLQUFNLENBQUNmLEtBQUQsQ0FBUUMsUUFBUiwyQkFBb0JhLEdBQUcsQ0FBQ0UsSUFBeEIsQ0FBTixDQURzQyx3QkFFdEMsR0FBRyxDQUVDLEtBQU1DLENBQUFBLElBQUksMEJBQUcsS0FBTXZCLENBQUFBLElBQUksQ0FBQ3dCLEtBQUwsQ0FBV2xCLEtBQVgsQ0FBaUJDLFFBQWpCLENBQVQsQ0FBVixDQUNBLEtBQU1rQixDQUFBQSxLQUFLLDBCQUFHZixXQUFXLENBQUNhLElBQUksQ0FBQ0csR0FBTixDQUFkLENBQVgsQ0FIRCx3QkFJQ0wsR0FBRyxDQUFDTSxJQUFKLENBQVMsQ0FBQ0osSUFBSSxDQUFFQSxJQUFJLENBQUNHLEdBQVosQ0FBaUJELEtBQWpCLENBQVQsRUFFSCxPQUFNckIsR0FBTixDQUFVLENBQ1AsS0FBTUMsQ0FBQUEsS0FBSywwQkFBR0YsV0FBVyxDQUFDQyxHQUFELENBQWQsQ0FBWCxDQURPLHdCQUVQaUIsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FBQ3hCLEtBQUssQ0FBRUEsS0FBUixDQUFyQixFQUNILENBQ0osQ0FaRCxDQWNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL1VzZXInKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcblxyXG5jb25zdCBoYW5kbGVFcnJvcj0gZXJyPT57XHJcbiAgICBsZXQgZXJyb3I9IHsgZW1haWw6ICdQcm92aWRlIGFuIGVtYWlsIGFkZHJlc3MnLCBwYXNzd29yZDogJ1Byb3ZpZGUgYSBwYXNzd29yZCd9XHJcblxyXG4gICAgLy9Mb2dpbiBlcnJvcnNcclxuICAgIGlmKGVyci5tZXNzYWdlID09PSAnSW5jb3JyZWN0IGVtYWlsJykge1xyXG4gICAgICAgIGVycm9yLmVtYWlsID0gJ1RoYXQgZW1haWwgaXMgbm90IHJlZ2lzdGVyZWQnO1xyXG4gICAgfVxyXG4gICAgaWYoZXJyLm1lc3NhZ2UgPT09ICdJbmNvcnJlY3QgcGFzc3dvcmQnKSB7XHJcbiAgICAgICAgZXJyb3IucGFzc3dvcmQgPSAnVGhhdCBwYXNzd29yZCBpcyBpbmNvcnJlY3QnO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuXHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbiAgICBcclxufVxyXG5cclxuY29uc3QgbWF4QWdlPSAxKjI0KjYwKjYwO1xyXG5jb25zdCBjcmVhdGVUb2tlbiA9IChpZCk9PntcclxuICAgIC8vSGVyZSB0aGUgcGF5bG9hZCB0byBiZSBzaWduZWQgaXMgdGhlIHVzZXIgaWRcclxuICAgIHJldHVybiBqd3Quc2lnbih7IGlkIH0sIHByb2Nlc3MuZW52LlNFQ1JFVF9LRVksIHtcclxuICAgICAgICBleHBpcmVzSW46IG1heEFnZVxyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5zaWduSW4gPSBhc3luYyAocmVxLCByZXMpPT57XHJcbiAgICBjb25zdCB7ZW1haWwsIHBhc3N3b3JkfSA9IHJlcS5ib2R5O1xyXG4gICAgdHJ5e1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmxvZ2luKGVtYWlsLHBhc3N3b3JkKTtcclxuICAgICAgICBjb25zdCB0b2tlbiA9IGNyZWF0ZVRva2VuKHVzZXIuX2lkKTtcclxuICAgICAgICByZXMuanNvbih7dXNlcjogdXNlci5faWQsIHRva2VufSk7XHJcbiAgICAgICBcclxuICAgIH1jYXRjaChlcnIpe1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gaGFuZGxlRXJyb3IoZXJyKTtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7ZXJyb3I6IGVycm9yfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIG1vZHVsZS5leHBvcnRzLnJlZ2lzdGVyID0gYXN5bmMgKHJlcSwgcmVzKT0+e1xyXG4vLyAgICAgY29uc3Qge2VtYWlsLCBwYXNzd29yZH0gPSByZXEuYm9keTtcclxuICAgIFxyXG4vLyAgICAgdHJ5e1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7IGVtYWlsLCBwYXNzd29yZCB9KTtcclxuLy8gICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHVzZXI6IHVzZXIuX2lkIH0pO1xyXG4vLyAgICAgfWNhdGNoKGVycil7XHJcbi8vICAgICAgICAgaGFuZGxlRXJyb3IoZXJyKTtcclxuLy8gICAgICAgICByZXMuc2VuZCgndXNlciBub3QgY3JlYXRlZCcpO1xyXG4vLyAgICAgfVxyXG4vLyB9XHJcblxyXG4vLyBtb2R1bGUuZXhwb3J0cy5sb2dvdXQgPSAocmVxLCByZXMpPT57XHJcbi8vICAgICByZXMuaGVhZGVyKCdBdXRob3JpemF0aW9uJywgJycpO1xyXG4vLyAgICAgcmVzLmpzb24oe30pO1xyXG4gICAgXHJcbi8vIH1cclxuXHJcbiJdfQ==