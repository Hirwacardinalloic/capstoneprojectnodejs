function cov_yvc29mrct(){var path="C:\\capstoneRestAPis\\models\\User.js";var hash="8dff027949673cc2c0adb30e8c7f6851b06d2a0b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\capstoneRestAPis\\models\\User.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:20},end:{line:2,column:40}},"2":{start:{line:3,column:15},end:{line:3,column:32}},"3":{start:{line:5,column:19},end:{line:21,column:2}},"4":{start:{line:24,column:0},end:{line:30,column:3}},"5":{start:{line:26,column:17},end:{line:26,column:39}},"6":{start:{line:28,column:4},end:{line:28,column:58}},"7":{start:{line:29,column:4},end:{line:29,column:11}},"8":{start:{line:33,column:0},end:{line:43,column:1}},"9":{start:{line:34,column:17},end:{line:34,column:46}},"10":{start:{line:35,column:4},end:{line:41,column:5}},"11":{start:{line:36,column:21},end:{line:36,column:66}},"12":{start:{line:37,column:8},end:{line:39,column:9}},"13":{start:{line:38,column:12},end:{line:38,column:24}},"14":{start:{line:40,column:8},end:{line:40,column:42}},"15":{start:{line:42,column:4},end:{line:42,column:35}},"16":{start:{line:45,column:13},end:{line:45,column:47}},"17":{start:{line:47,column:0},end:{line:47,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:24,column:23},end:{line:24,column:24}},loc:{start:{line:24,column:44},end:{line:30,column:1}},line:24},"1":{name:"(anonymous_1)",decl:{start:{line:33,column:27},end:{line:33,column:28}},loc:{start:{line:33,column:59},end:{line:43,column:1}},line:33}},branchMap:{"0":{loc:{start:{line:35,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:41,column:5}},{start:{line:35,column:4},end:{line:41,column:5}}],line:35},"1":{loc:{start:{line:37,column:8},end:{line:39,column:9}},type:"if",locations:[{start:{line:37,column:8},end:{line:39,column:9}},{start:{line:37,column:8},end:{line:39,column:9}}],line:37}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8dff027949673cc2c0adb30e8c7f6851b06d2a0b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_yvc29mrct=function(){return actualCoverage;};}return actualCoverage;}cov_yvc29mrct();const mongoose=(cov_yvc29mrct().s[0]++,require('mongoose'));const{isEmail}=(cov_yvc29mrct().s[1]++,require('validator'));const bcrypt=(cov_yvc29mrct().s[2]++,require('bcrypt'));const userSchema=(cov_yvc29mrct().s[3]++,new mongoose.Schema({email:{type:String,required:[true,'Please enter an email'],unique:true,lowercase:[true,'The email should be in lower case letters'],validate:[isEmail,'Please enter a valid email']},password:{type:String,required:[true,'Please enter a password'],minlength:[8,'Minimum password length is 8 characters']},tokens:[{token:String}]}));//this will be fired before the user is saved
//password hashing
cov_yvc29mrct().s[4]++;userSchema.pre('save',async function(next){cov_yvc29mrct().f[0]++;//generating a string to be attached to the password before hashing it
const salt=(cov_yvc29mrct().s[5]++,await bcrypt.genSalt());//hashing the password
cov_yvc29mrct().s[6]++;this.password=await bcrypt.hash(this.password,salt);cov_yvc29mrct().s[7]++;next();//without next the code doen's go on
});//static method to log users in
cov_yvc29mrct().s[8]++;userSchema.statics.login=async function(email,password){cov_yvc29mrct().f[1]++;const user=(cov_yvc29mrct().s[9]++,await this.findOne({email}));cov_yvc29mrct().s[10]++;if(user){cov_yvc29mrct().b[0][0]++;const auth=(cov_yvc29mrct().s[11]++,await bcrypt.compare(password,user.password));cov_yvc29mrct().s[12]++;if(auth){cov_yvc29mrct().b[1][0]++;cov_yvc29mrct().s[13]++;return user;}else{cov_yvc29mrct().b[1][1]++;}cov_yvc29mrct().s[14]++;throw Error('Incorrect password');}else{cov_yvc29mrct().b[0][1]++;}cov_yvc29mrct().s[15]++;throw Error('Incorrect email');};const User=(cov_yvc29mrct().s[16]++,mongoose.model('user',userSchema));cov_yvc29mrct().s[17]++;module.exports=User;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXIuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiaXNFbWFpbCIsImJjcnlwdCIsInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJlbWFpbCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsImxvd2VyY2FzZSIsInZhbGlkYXRlIiwicGFzc3dvcmQiLCJtaW5sZW5ndGgiLCJ0b2tlbnMiLCJ0b2tlbiIsInByZSIsIm5leHQiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2giLCJzdGF0aWNzIiwibG9naW4iLCJ1c2VyIiwiZmluZE9uZSIsImF1dGgiLCJjb21wYXJlIiwiRXJyb3IiLCJVc2VyIiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiNDBFQWVZO3lGQWZaLEtBQU1BLENBQUFBLFFBQVEseUJBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQUNBLEtBQU0sQ0FBRUMsT0FBRiwwQkFBY0QsT0FBTyxDQUFDLFdBQUQsQ0FBckIsQ0FBTixDQUNBLEtBQU1FLENBQUFBLE1BQU0seUJBQUdGLE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDQUVBLEtBQU1HLENBQUFBLFVBQVUseUJBQUcsR0FBSUosQ0FBQUEsUUFBUSxDQUFDSyxNQUFiLENBQW9CLENBQ25DQyxLQUFLLENBQUUsQ0FDSEMsSUFBSSxDQUFDQyxNQURGLENBRUhDLFFBQVEsQ0FBRSxDQUFDLElBQUQsQ0FBTyx1QkFBUCxDQUZQLENBR0hDLE1BQU0sQ0FBRSxJQUhMLENBSUhDLFNBQVMsQ0FBRSxDQUFDLElBQUQsQ0FBTywyQ0FBUCxDQUpSLENBS0hDLFFBQVEsQ0FBRSxDQUFDVixPQUFELENBQVUsNEJBQVYsQ0FMUCxDQUQ0QixDQVFuQ1csUUFBUSxDQUFFLENBQ05OLElBQUksQ0FBRUMsTUFEQSxDQUVOQyxRQUFRLENBQUUsQ0FBQyxJQUFELENBQU8seUJBQVAsQ0FGSixDQUdOSyxTQUFTLENBQUUsQ0FBQyxDQUFELENBQUkseUNBQUosQ0FITCxDQVJ5QixDQWFuQ0MsTUFBTSxDQUFFLENBQUMsQ0FDTEMsS0FBSyxDQUFFUixNQURGLENBQUQsQ0FiMkIsQ0FBcEIsQ0FBSCxDQUFoQixDQWlCQTtBQUNBO3VCQUNBSixVQUFVLENBQUNhLEdBQVgsQ0FBZSxNQUFmLENBQXVCLGVBQWdCQyxJQUFoQixDQUFxQix3QkFDeEM7QUFDQSxLQUFNQyxDQUFBQSxJQUFJLHlCQUFHLEtBQU1oQixDQUFBQSxNQUFNLENBQUNpQixPQUFQLEVBQVQsQ0FBVixDQUNBO0FBSHdDLHVCQUl4QyxLQUFLUCxRQUFMLENBQWUsS0FBTVYsQ0FBQUEsTUFBTSxDQUFDa0IsSUFBUCxDQUFZLEtBQUtSLFFBQWpCLENBQTJCTSxJQUEzQixDQUFyQixDQUp3Qyx1QkFLeENELElBQUksR0FBRztBQUNWLENBTkQsRUFRQTt1QkFDQWQsVUFBVSxDQUFDa0IsT0FBWCxDQUFtQkMsS0FBbkIsQ0FBMkIsZUFBZWpCLEtBQWYsQ0FBc0JPLFFBQXRCLENBQWdDLHdCQUN2RCxLQUFNVyxDQUFBQSxJQUFJLHlCQUFHLEtBQU0sTUFBS0MsT0FBTCxDQUFhLENBQUVuQixLQUFGLENBQWIsQ0FBVCxDQUFWLENBRHVELHdCQUV2RCxHQUFHa0IsSUFBSCxDQUFTLDJCQUNMLEtBQU1FLENBQUFBLElBQUksMEJBQUcsS0FBTXZCLENBQUFBLE1BQU0sQ0FBQ3dCLE9BQVAsQ0FBZWQsUUFBZixDQUF5QlcsSUFBSSxDQUFDWCxRQUE5QixDQUFULENBQVYsQ0FESyx3QkFFTCxHQUFHYSxJQUFILENBQVMsbURBQ0wsTUFBT0YsQ0FBQUEsSUFBUCxDQUNILENBRkQsZ0NBRkssd0JBS0wsS0FBTUksQ0FBQUEsS0FBSyxDQUFDLG9CQUFELENBQVgsQ0FDSCxDQU5ELGdDQUZ1RCx3QkFTdkQsS0FBTUEsQ0FBQUEsS0FBSyxDQUFDLGlCQUFELENBQVgsQ0FDSCxDQVZELENBWUEsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBRzdCLFFBQVEsQ0FBQzhCLEtBQVQsQ0FBZSxNQUFmLENBQXVCMUIsVUFBdkIsQ0FBSCxDQUFWLEMsd0JBRUEyQixNQUFNLENBQUNDLE9BQVAsQ0FBaUJILElBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5jb25zdCB7IGlzRW1haWwgfSA9IHJlcXVpcmUoJ3ZhbGlkYXRvcicpO1xyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcclxuXHJcbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIGVtYWlsOiB7XHJcbiAgICAgICAgdHlwZTpTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIGVudGVyIGFuIGVtYWlsJ10sXHJcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxyXG4gICAgICAgIGxvd2VyY2FzZTogW3RydWUsICdUaGUgZW1haWwgc2hvdWxkIGJlIGluIGxvd2VyIGNhc2UgbGV0dGVycyddLFxyXG4gICAgICAgIHZhbGlkYXRlOiBbaXNFbWFpbCwgJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsJ11cclxuICAgIH0sXHJcbiAgICBwYXNzd29yZDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZDogW3RydWUsICdQbGVhc2UgZW50ZXIgYSBwYXNzd29yZCddLFxyXG4gICAgICAgIG1pbmxlbmd0aDogWzgsICdNaW5pbXVtIHBhc3N3b3JkIGxlbmd0aCBpcyA4IGNoYXJhY3RlcnMnXVxyXG4gICAgfSxcclxuICAgIHRva2VuczogW3tcclxuICAgICAgICB0b2tlbjogU3RyaW5nXHJcbiAgICB9XVxyXG59KTtcclxuLy90aGlzIHdpbGwgYmUgZmlyZWQgYmVmb3JlIHRoZSB1c2VyIGlzIHNhdmVkXHJcbi8vcGFzc3dvcmQgaGFzaGluZ1xyXG51c2VyU2NoZW1hLnByZSgnc2F2ZScsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KXtcclxuICAgIC8vZ2VuZXJhdGluZyBhIHN0cmluZyB0byBiZSBhdHRhY2hlZCB0byB0aGUgcGFzc3dvcmQgYmVmb3JlIGhhc2hpbmcgaXRcclxuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgpO1xyXG4gICAgLy9oYXNoaW5nIHRoZSBwYXNzd29yZFxyXG4gICAgdGhpcy5wYXNzd29yZD0gYXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCwgc2FsdCk7XHJcbiAgICBuZXh0KCk7Ly93aXRob3V0IG5leHQgdGhlIGNvZGUgZG9lbidzIGdvIG9uXHJcbn0pO1xyXG5cclxuLy9zdGF0aWMgbWV0aG9kIHRvIGxvZyB1c2VycyBpblxyXG51c2VyU2NoZW1hLnN0YXRpY3MubG9naW4gPSBhc3luYyBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuICAgIGlmKHVzZXIpIHtcclxuICAgICAgICBjb25zdCBhdXRoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xyXG4gICAgICAgIGlmKGF1dGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcclxuICAgIH1cclxuICAgIHRocm93IEVycm9yKCdJbmNvcnJlY3QgZW1haWwnKTtcclxufVxyXG5cclxuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCd1c2VyJywgdXNlclNjaGVtYSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7Il19